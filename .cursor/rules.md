# –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ Telegram Bot Game ¬´–ö—Ä–µ—Å—Ç–∏–∫–∏-–ù–æ–ª–∏–∫–∏¬ª

## üéØ –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç—ç–∫
- **–Ø–∑—ã–∫**: PHP 7.4+ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–µ–Ω –ø—Ä–æ–µ–∫—Ç—É prize-wheel)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Telegram Bot Webhook + PHP Web Application
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: JSON —Ñ–∞–π–ª—ã (file-based storage)
- **Frontend**: HTML/CSS/JavaScript (Telegram WebApp)
- **API**: Telegram Bot API —á–µ—Ä–µ–∑ CURL

### –ö–æ–¥-—Å—Ç–∏–ª—å (PHP)

#### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- **–§–∞–π–ª—ã**: kebab-case –¥–ª—è PHP —Ñ–∞–π–ª–æ–≤ (`game-logic.php`, `promo-code.php`)
- **–ö–ª–∞—Å—Å—ã**: PascalCase (`GameAI`, `PromoCode`, `Logger`)
- **–ú–µ—Ç–æ–¥—ã/—Ñ—É–Ω–∫—Ü–∏–∏**: camelCase (`makeMove()`, `generatePromoCode()`)
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã**: UPPER_SNAKE_CASE (`BOT_TOKEN`, `MAX_GAME_SIZE`)
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**: camelCase (`$gameState`, `$promoCode`)
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞**: —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `$` –∏ camelCase (`private static $cache_dir`)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- **–ö–ª–∞—Å—Å—ã**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ (–∫–∞–∫ `Logger`, `Security` –≤ prize-wheel)
- **–§—É–Ω–∫—Ü–∏–∏**: –í—ã–Ω–æ—Å–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –∫–ª–∞—Å—Å—ã
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**: `require_once` –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö, `include_once` –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**: PHPDoc –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ –∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

```php
/**
 * –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
 * 
 * @return string 5-–∑–Ω–∞—á–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
 */
public static function generate(): string {
    // ...
}
```

#### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û—Ç—Å—Ç—É–ø—ã: 4 –ø—Ä–æ–±–µ–ª–∞ (–Ω–µ —Ç–∞–±—ã)
- –§–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏: –æ—Ç–∫—Ä—ã–≤–∞—é—â–∞—è –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–µ
- –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: –º–∞–∫—Å–∏–º—É–º 120 —Å–∏–º–≤–æ–ª–æ–≤
- –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏: –º–µ–∂–¥—É –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –±–ª–æ–∫–∞–º–∏ –∫–æ–¥–∞

## ü§ñ Telegram Bot —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–æ—Ç–∞ (–∫–∞–∫ –≤ prize-wheel)

#### Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–§–∞–π–ª**: `webhook.php` ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è webhook
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: 
  ```php
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  $input = file_get_contents('php://input');
  $update = json_decode($input, true);
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
  if (isset($update['message'])) {
      // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
  }
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ callback queries
  if (isset($update['callback_query'])) {
      // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫
  }
  ```

#### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CURL –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Telegram API
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ—Ç–≤–µ—Ç API
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Logger::info()` –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Logger::error()` –¥–ª—è –æ—à–∏–±–æ–∫

```php
function sendMessage($chat_id, $text, $reply_markup = null) {
    global $bot_token;
    
    $data = [
        'chat_id' => $chat_id,
        'text' => $text,
        'parse_mode' => 'HTML'
    ];
    
    if ($reply_markup) {
        $data['reply_markup'] = json_encode($reply_markup);
    }
    
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "https://api.telegram.org/bot$bot_token/sendMessage");
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    
    $response = curl_exec($ch);
    $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    if ($response !== false && $http_code === 200) {
        $result = json_decode($response, true);
        if ($result && $result['ok']) {
            Logger::info("Message sent", ['chat_id' => $chat_id]);
            return true;
        }
    }
    
    Logger::error("Failed to send message", ['response' => $response]);
    return false;
}
```

#### –°–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞
- –í—ã–Ω–æ—Å–∏—Ç—å –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª/–∫–ª–∞—Å—Å (`bot/messages.php`)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTML —Ä–∞–∑–º–µ—Ç–∫—É –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –≠–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è: –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í—Å–µ async –æ–ø–µ—Ä–∞—Ü–∏–∏ (CURL) –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (userId, command, error message)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å try-catch –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üéÆ Game Logic –ø—Ä–∞–≤–∏–ª–∞

### –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã (PHP)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞ GameLogic
```php
class GameLogic {
    /**
     * –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –Ω–∞ –∏–≥—Ä–æ–≤–æ–º –ø–æ–ª–µ
     */
    public static function checkWin($board, $symbol): bool {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–æ–∫, —Å—Ç–æ–ª–±—Ü–æ–≤, –¥–∏–∞–≥–æ–Ω–∞–ª–µ–π
    }
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏—á—å–µ–π
     */
    public static function checkDraw($board): bool {
        // –í—Å–µ —è—á–µ–π–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∏ –Ω–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
    }
    
    /**
     * –í–∞–ª–∏–¥–∞—Ü–∏—è —Ö–æ–¥–∞
     */
    public static function validateMove($board, $position): bool {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —è—á–µ–π–∫–∞ —Å–≤–æ–±–æ–¥–Ω–∞
    }
}
```

#### AI –±–æ—Ç–∞
- –ò–≥—Ä–æ–∫ –≤—Å–µ–≥–¥–∞ —Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–º (X)
- –ë–æ—Ç –∏–≥—Ä–∞–µ—Ç O
- AI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –∏–¥–µ–∞–ª—å–Ω—ã–º (60% —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å, 30% –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, 10% –≤—ã–∏–≥—Ä—ã—à)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–±–µ–¥—ã
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ö–æ–¥—ã –±–æ—Ç–∞

```php
class GameAI {
    public static function makeMove($board, $bot_symbol = 'O') {
        $random = mt_rand(1, 100);
        
        if ($random <= 10) {
            return self::findWinningMove($board, $bot_symbol);
        } elseif ($random <= 40) {
            return self::findBlockingMove($board, $bot_symbol);
        } else {
            return self::findRandomMove($board);
        }
    }
}
```

### –ü—Ä–æ–º–æ–∫–æ–¥—ã
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–±–µ–¥–µ –∏–≥—Ä–æ–∫–∞
- –§–æ—Ä–º–∞—Ç: 5 —Ü–∏—Ñ—Ä (10000-99999)
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ `promo-codes.json`
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–¥–∞—Ç–∞, tg_id, game_id)
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ Web UI –∏ –≤ Telegram –±–æ—Ç

```php
class PromoCode {
    public static function generate($tg_id, $game_id): string {
        $promo_file = 'data/promo-codes.json';
        $used_codes = self::getUsedCodes();
        
        do {
            $code = str_pad(mt_rand(10000, 99999), 5, '0', STR_PAD_LEFT);
        } while (in_array($code, $used_codes));
        
        self::savePromoCode($code, $tg_id, $game_id);
        
        return $code;
    }
}
```

## üåê Web App –ø—Ä–∞–≤–∏–ª–∞

### Telegram WebApp SDK
- –í—Å–µ–≥–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å SDK –≤ –Ω–∞—á–∞–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `window.Telegram.WebApp` –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç —á–µ—Ä–µ–∑ `sendData()`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `expand()` –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ SDK –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

```javascript
if (window.Telegram && window.Telegram.WebApp) {
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã
    tg.sendData(JSON.stringify({
        action: 'win',
        promo_code: promoCode
    }));
}
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (WebP, —Å–∂–∞—Ç–∏–µ)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- Mobile-first –ø–æ–¥—Ö–æ–¥
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–æ–≤ Telegram
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CSS Grid/Flexbox –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –£—á–∏—Ç—ã–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã (notch, status bar)
- Viewport meta tag –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

### UX/UI
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ (CSS transitions, transforms)
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –Ω–∞ –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è async –æ–ø–µ—Ä–∞—Ü–∏–π
- –ß—ë—Ç–∫–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ö–æ–¥–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö

### –†–∞–±–æ—Ç–∞ —Å JSON —Ñ–∞–π–ª–∞–º–∏ (–∫–∞–∫ –≤ prize-wheel)

#### –ß—Ç–µ–Ω–∏–µ JSON
```php
function loadJsonFile($filename, $default = []) {
    if (!file_exists($filename)) {
        return $default;
    }
    
    $content = @file_get_contents($filename);
    if ($content === false) {
        Logger::error("Failed to read file", ['file' => $filename]);
        return $default;
    }
    
    $data = @json_decode($content, true);
    if ($data === null && json_last_error() !== JSON_ERROR_NONE) {
        Logger::error("JSON decode error", [
            'file' => $filename,
            'error' => json_last_error_msg()
        ]);
        return $default;
    }
    
    return $data ?: $default;
}
```

#### –ó–∞–ø–∏—Å—å JSON
```php
function saveJsonFile($filename, $data) {
    $json = json_encode($data, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE);
    $result = file_put_contents($filename, $json, LOCK_EX);
    
    if ($result === false) {
        Logger::error("Failed to save file", ['file' => $filename]);
        return false;
    }
    
    return true;
}
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**games.json**:
```json
[
    {
        "game_id": "unique_id",
        "tg_id": "telegram_chat_id",
        "board": ["X", "O", "", ...],
        "result": "win|lose|draw",
        "promo_code": "48291",
        "created_at": "2024-01-01 12:00:00",
        "finished_at": "2024-01-01 12:05:00"
    }
]
```

**promo-codes.json**:
```json
[
    {
        "code": "48291",
        "tg_id": "telegram_chat_id",
        "game_id": "unique_id",
        "issued_at": "2024-01-01 12:05:00",
        "used": false
    }
]
```

### –ò–º–ø–æ—Ä—Ç—ã –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `require_once` –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `include_once` –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö
- –ü–æ—Ä—è–¥–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
  1. `config.php`
  2. `Logger.php`
  3. –î—Ä—É–≥–∏–µ –∫–ª–∞—Å—Å—ã
  4. –§—É–Ω–∫—Ü–∏–∏

```php
// –í –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
require_once 'config.php';
require_once 'Logger.php';
require_once 'includes/Security.php';
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `Security` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å `initData` –æ—Ç Telegram WebApp
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```php
// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ö–æ–¥–∞
if (!GameLogic::validateMove($board, $position)) {
    Logger::warning('Invalid move', ['position' => $position]);
    return ['error' => 'Invalid move'];
}
```

### Rate Limiting
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Security::checkRateLimit()` –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- –õ–∏–º–∏—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–∏–≥—Ä–∞, webhook, admin)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –ª–∏–º–∏—Ç–æ–≤

### CSRF –∑–∞—â–∏—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Security::generateCSRFToken()` –∏ `validateCSRFToken()`
- –¢–æ–∫–µ–Ω—ã –≤ —Å–µ—Å—Å–∏—è—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö POST –∑–∞–ø—Ä–æ—Å–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```php
Logger::security('Rate limit exceeded', [
    'ip' => $ip,
    'action' => $action,
    'limit' => $limit
]);
```

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Logger (–∫–∞–∫ –≤ prize-wheel)
```php
// –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
Logger::info('Game started', ['tg_id' => $tg_id, 'game_id' => $game_id]);

// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
Logger::warning('Invalid move attempt', ['position' => $position]);

// –û—à–∏–±–∫–∏
Logger::error('Game logic error', ['error' => $error_message]);

// –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
Logger::userAction('Game won', $user_id, ['promo_code' => $code]);

// –°–æ–±—ã—Ç–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
Logger::security('Rate limit exceeded', ['ip' => $ip]);
```

### –õ–æ–≥–∏—Ä—É–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è
- –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
- –•–æ–¥—ã –∏–≥—Ä–æ–∫–∞ –∏ –±–æ—Ç–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- Webhook –∑–∞–ø—Ä–æ—Å—ã

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- **–ù–µ –∏–∑–º–µ–Ω—è—Ç—å CSS —Å—Ç–∏–ª–∏** –±–µ–∑ —è–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–£–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã** –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
- **–ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω—ã** –∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `config.php`)
- **–°–ª–µ–¥–æ–≤–∞—Ç—å –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ** –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
- **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Logger** –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏** —Å try-catch –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `TemplateConfig` (–∫–∞–∫ –≤ prize-wheel)
- –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ URL
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

```php
// template-config.php
class TemplateConfig {
    const BOT_TOKEN = 'your_token_here';
    const DOMAIN = 'your-domain.com';
    const FULL_URL = 'https://your-domain.com';
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    public static function validateSettings() {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    }
}
```

### –†–∞–±–æ—Ç–∞ —Å —Å–µ—Å—Å–∏—è–º–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–∏ –î–û `session_start()`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cookies
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–µ—Å—Å–∏–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

```php
// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–∏ –î–û session_start()
ini_set('session.cookie_lifetime', 86400);
ini_set('session.cookie_secure', 1);
ini_set('session.cookie_httponly', 0);
session_start();
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ñ–∞–π–ª–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@` –¥–ª—è –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ prize-wheel –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞.
