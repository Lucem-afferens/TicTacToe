# üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ prize-wheel

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–Ø–∑—ã–∫**: PHP (–Ω–µ Node.js!)
- **Webhook**: –ü—Ä–æ—Å—Ç–æ–π PHP —Ñ–∞–π–ª `webhook.php`
- **API**: –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã Telegram Bot API —á–µ—Ä–µ–∑ curl
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: JSON —Ñ–∞–π–ª—ã (`users.json`, `spin_history.json`, `prizes.json`)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–ª–∞—Å—Å `Logger.php`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ webhook

```php
// 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
$input = file_get_contents('php://input');
$update = json_decode($input, true);

// 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
if (isset($update['message'])) {
    $message = $update['message'];
    $text = $message['text'] ?? '';
    
    switch ($text) {
        case '/start':
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã
            sendMessage($chat_id, $welcome_message, $keyboard);
            break;
    }
}

// 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ callback queries
if (isset($update['callback_query'])) {
    $callback_data = $callback_query['data'] ?? '';
    switch ($callback_data) {
        case 'rules':
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ callback
            break;
    }
}

// 4. –û—Ç–≤–µ—Ç
echo json_encode(['status' => 'ok']);
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook (`setup-webhook.php`)

1. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ webhook**: `deleteWebhook`
2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ webhook**: `setWebhook` —Å URL
3. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é**: `deleteBotCommands`
4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é**: `setChatMenuButton` —Å Web App
5. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥**: `setMyCommands` —Å–æ —Å–ø–∏—Å–∫–æ–º –∫–æ–º–∞–Ω–¥
6. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞**: `getMe`

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ù–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ç–æ–ª—å–∫–æ curl
2. **–ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã API**: –í—Å–µ —á–µ—Ä–µ–∑ Telegram Bot API –Ω–∞–ø—Ä—è–º—É—é
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥**: –ü—Ä–æ—Å—Ç–æ–π switch/case
4. **Web App –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é —Å Web App URL
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ß–µ—Ä–µ–∑ –∫–ª–∞—Å—Å Logger
6. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ config.php

## üîÑ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–ù–∞—à –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- Node.js + TypeScript
- Grammy –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- –£–∂–µ –µ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –£–ø—Ä–æ—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–∞–Ω–¥ (–∫–∞–∫ –≤ prize-wheel)
2. –î–æ–±–∞–≤–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ `setMyCommands`
3. –î–æ–±–∞–≤–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é —á–µ—Ä–µ–∑ `setChatMenuButton`
4. –£–ø—Ä–æ—Å—Ç–∏—Ç—å webhook setup (–∫–∞–∫ –≤ prize-wheel)

